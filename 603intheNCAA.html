<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="603 in the NCAA - New Hampshire players competing in college basketball for the 2025-26 season.">
  <meta name="theme-color" content="#1565c0">
  <title>603 in the NCAA | Ball603</title>
  
  <link rel="icon" type="image/png" href="/logo.png">
  <link rel="apple-touch-icon" href="/logo.png">
  <link rel="stylesheet" href="/styles.css">
  
  <!-- Open Graph -->
  <meta property="og:title" content="603 in the NCAA | Ball603">
  <meta property="og:description" content="New Hampshire players competing in college basketball">
  <meta property="og:url" content="https://ball603.com/603intheNCAA">
</head>
<body>
  
  <!-- Navigation (loaded dynamically) -->
  <div id="site-header"></div>
  <div id="mobile-menu"></div>
  <script src="/includes/nav-loader.js"></script>

  <!-- Main Content -->
  <main class="features-main">
    
    <!-- Hero Section -->
    <section class="features-hero features-hero-ncaa">
      <div class="features-hero-bg">
        <span class="hero-watermark">üéì</span>
      </div>
      <div class="features-hero-content">
        <div class="features-hero-badge">üéì</div>
        <h1 class="features-hero-title">603 in the NCAA</h1>
        <p class="features-hero-subtitle">New Hampshire Players in College Basketball ‚Ä¢ 2025-26 Season</p>
        <div class="features-hero-stats">
          <div class="hero-stat">
            <span class="hero-stat-value" id="totalPlayers">--</span>
            <span class="hero-stat-label">Players</span>
          </div>
          <div class="hero-stat">
            <span class="hero-stat-value" id="totalColleges">--</span>
            <span class="hero-stat-label">Colleges</span>
          </div>
          <div class="hero-stat">
            <span class="hero-stat-value" id="totalHighSchools">--</span>
            <span class="hero-stat-label">High Schools</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Top Sections - Side by Side Tables -->
    <section class="top-tables-section">
      <div class="top-tables-container">
        <div class="top-table-box">
          <h3 class="top-table-title">üè´ Top Sending Schools</h3>
          <table class="top-table" id="topSchoolsTable">
            <thead>
              <tr><th>#</th><th>High School</th><th>Players</th></tr>
            </thead>
            <tbody id="topSchoolsBody">
              <!-- Populated by JS -->
            </tbody>
          </table>
        </div>
        <div class="top-table-box">
          <h3 class="top-table-title">üéì Popular Destinations</h3>
          <table class="top-table" id="topCollegesTable">
            <thead>
              <tr><th>#</th><th>College</th><th>Players</th></tr>
            </thead>
            <tbody id="topCollegesBody">
              <!-- Populated by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Filters Bar -->
    <section class="filters-bar">
      <div class="filters-inner">
        <div class="filter-group">
          <label>Sort By</label>
          <div class="sort-toggle">
            <button class="sort-btn active" id="sortBySchool" data-sort="school">High School</button>
            <button class="sort-btn" id="sortByCollege" data-sort="college">College</button>
          </div>
        </div>
        <div class="filter-group filter-search">
          <label for="playerSearch">Search</label>
          <input type="text" id="playerSearch" placeholder="Search by name or school...">
        </div>
        <div class="filter-results">
          <span id="resultsCount">0 players</span>
        </div>
      </div>
    </section>

    <!-- Players List -->
    <section class="players-section">
      <div class="players-list" id="playersList">
        <!-- Populated by JS -->
      </div>
    </section>

    <!-- Submit CTA -->
    <section class="submit-cta">
      <div class="submit-cta-inner">
        <h3>Know a NH player in college we're missing?</h3>
        <p>Help us track every Granite Stater playing college basketball.</p>
        <a href="/contact" class="submit-btn">Submit a Player</a>
      </div>
    </section>

  </main>

  <!-- ==================== SITE FOOTER ==================== -->
  <footer class="site-footer">
    <div class="footer-logo">
      <img src="/logo.png" alt="Ball603">
    </div>
    <div class="footer-links">
      <a href="/about">About Us</a>
      <a href="/contact">Contact</a>
    </div>
    <div class="footer-social">
      <a href="https://facebook.com/ball603" target="_blank" title="Facebook">
        <svg viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
      </a>
      <a href="https://www.instagram.com/ball603nh/" target="_blank" title="Instagram">
        <svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
      </a>
      <a href="https://x.com/Ball603NH" target="_blank" title="X (Twitter)">
        <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
      </a>
    </div>
    <p class="footer-copyright">¬© 2025 Ball603. All rights reserved.</p>
  </footer>

  <!-- Features Data -->
  <script src="/features-data.js"></script>
  
  <!-- Page Script -->
  <script>
    // State
    let filteredPlayers = [...NCAA_PLAYERS];
    let sortBy = 'school'; // Default to high school
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      updateStats();
      renderTopSchools();
      renderTopColleges();
      renderPlayersList();
      setupEventListeners();
    });
    
    function updateStats() {
      document.getElementById('totalPlayers').textContent = NCAA_PLAYERS.length;
      document.getElementById('totalColleges').textContent = COLLEGES.length;
      
      // Count unique high schools
      const highSchools = new Set(NCAA_PLAYERS.map(p => p.high_school));
      document.getElementById('totalHighSchools').textContent = highSchools.size;
    }
    
    function renderTopSchools() {
      // Count players per high school
      const counts = {};
      NCAA_PLAYERS.forEach(p => {
        let school = p.high_school;
        if (school.includes('/')) {
          school = school.split('/')[0].trim();
        }
        counts[school] = (counts[school] || 0) + 1;
      });
      
      const sorted = Object.entries(counts)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      const tbody = document.getElementById('topSchoolsBody');
      tbody.innerHTML = sorted.map(([school, count], index) => `
        <tr>
          <td>${index + 1}</td>
          <td>${school}</td>
          <td>${count}</td>
        </tr>
      `).join('');
    }
    
    function renderTopColleges() {
      // Count players per college
      const counts = {};
      NCAA_PLAYERS.forEach(p => {
        counts[p.college] = (counts[p.college] || 0) + 1;
      });
      
      const sorted = Object.entries(counts)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      const tbody = document.getElementById('topCollegesBody');
      tbody.innerHTML = sorted.map(([college, count], index) => `
        <tr>
          <td>${index + 1}</td>
          <td>${college}</td>
          <td>${count}</td>
        </tr>
      `).join('');
    }
    
    function setupEventListeners() {
      document.getElementById('playerSearch').addEventListener('input', applyFilters);
      
      // Sort toggle buttons
      document.getElementById('sortBySchool').addEventListener('click', () => {
        sortBy = 'school';
        document.getElementById('sortBySchool').classList.add('active');
        document.getElementById('sortByCollege').classList.remove('active');
        renderPlayersList();
      });
      
      document.getElementById('sortByCollege').addEventListener('click', () => {
        sortBy = 'college';
        document.getElementById('sortByCollege').classList.add('active');
        document.getElementById('sortBySchool').classList.remove('active');
        renderPlayersList();
      });
    }
    
    function applyFilters() {
      const search = document.getElementById('playerSearch').value.toLowerCase();
      
      filteredPlayers = NCAA_PLAYERS.filter(player => {
        if (search && !player.name.toLowerCase().includes(search) && 
            !player.high_school.toLowerCase().includes(search) &&
            !player.college.toLowerCase().includes(search)) return false;
        return true;
      });
      
      renderPlayersList();
    }
    
    function renderPlayersList() {
      const container = document.getElementById('playersList');
      const countEl = document.getElementById('resultsCount');
      
      countEl.textContent = `${filteredPlayers.length} player${filteredPlayers.length !== 1 ? 's' : ''}`;
      
      if (filteredPlayers.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üéì</div>
            <div class="empty-title">No players found</div>
            <div class="empty-text">Try adjusting your search</div>
          </div>
        `;
        return;
      }
      
      if (sortBy === 'school') {
        // Group by high school
        const bySchool = {};
        filteredPlayers.forEach(player => {
          let school = player.high_school;
          if (school.includes('/')) {
            school = school.split('/')[0].trim();
          }
          if (!bySchool[school]) bySchool[school] = [];
          bySchool[school].push(player);
        });
        
        const schools = Object.keys(bySchool).sort();
        
        container.innerHTML = schools.map(school => {
          const players = bySchool[school].sort((a, b) => a.name.localeCompare(b.name));
          
          return `
            <div class="group-card">
              <div class="group-header group-header-school">
                <h3 class="group-name">${school}</h3>
                <span class="group-count">${players.length} player${players.length !== 1 ? 's' : ''}</span>
              </div>
              <div class="group-players">
                ${players.map(p => `
                  <div class="player-row">
                    <span class="player-name">${p.name}</span>
                    <span class="player-detail">${p.college}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }).join('');
      } else {
        // Group by college
        const byCollege = {};
        filteredPlayers.forEach(player => {
          if (!byCollege[player.college]) byCollege[player.college] = [];
          byCollege[player.college].push(player);
        });
        
        const colleges = Object.keys(byCollege).sort();
        
        container.innerHTML = colleges.map(college => {
          const players = byCollege[college].sort((a, b) => a.name.localeCompare(b.name));
          
          return `
            <div class="group-card">
              <div class="group-header group-header-college">
                <h3 class="group-name">${college}</h3>
                <span class="group-count">${players.length} player${players.length !== 1 ? 's' : ''}</span>
              </div>
              <div class="group-players">
                ${players.map(p => `
                  <div class="player-row">
                    <span class="player-name">${p.name}</span>
                    <span class="player-detail">${p.high_school}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }).join('');
      }
    }
    
    // Mobile menu functionality
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const mobileDrawer = document.getElementById('mobileDrawer');
    const mobileOverlay = document.getElementById('mobileOverlay');
    const mobileClose = document.getElementById('mobileClose');
    
    function openMobileMenu() { 
      if (mobileDrawer) mobileDrawer.classList.add('active'); 
      if (mobileOverlay) mobileOverlay.classList.add('active'); 
      document.body.style.overflow = 'hidden'; 
    }
    function closeMobileMenu() { 
      if (mobileDrawer) mobileDrawer.classList.remove('active'); 
      if (mobileOverlay) mobileOverlay.classList.remove('active'); 
      document.body.style.overflow = ''; 
    }
    
    if (mobileMenuToggle) mobileMenuToggle.addEventListener('click', openMobileMenu);
    if (mobileClose) mobileClose.addEventListener('click', closeMobileMenu);
    if (mobileOverlay) mobileOverlay.addEventListener('click', closeMobileMenu);
    
    document.querySelectorAll('.mobile-nav-item[data-expandable]').forEach(item => {
      const link = item.querySelector('.mobile-nav-link');
      if (link) link.addEventListener('click', (e) => { e.preventDefault(); item.classList.toggle('expanded'); });
    });
    
    // Search toggle
    const searchToggle = document.getElementById('searchToggle');
    const searchDropdown = document.getElementById('searchDropdown');
    if (searchToggle && searchDropdown) {
      searchToggle.addEventListener('click', (e) => { e.stopPropagation(); searchDropdown.classList.toggle('active'); });
      document.addEventListener('click', (e) => { if (!searchDropdown.contains(e.target) && e.target !== searchToggle) searchDropdown.classList.remove('active'); });
    }
  </script>

</body>
</html>
